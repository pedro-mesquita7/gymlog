---
phase: 10-workout-features-demo-data
plan: 02
type: execute
wave: 2
depends_on: ["10-01"]
files_modified:
  - src/components/workout/StartWorkout.tsx
  - src/components/rotation/QuickStartCard.tsx
autonomous: true

must_haves:
  truths:
    - "User sees prominent quick-start card with next template and gym from active rotation"
    - "User sees rotation position indicator (Workout N of M in Rotation Name)"
    - "User can still manually select gym and template if they want to override"
    - "When no rotation is configured, user sees a hint suggesting setup"
  artifacts:
    - path: "src/components/rotation/QuickStartCard.tsx"
      provides: "Quick-start card showing next rotation workout"
      exports: ["QuickStartCard"]
    - path: "src/components/workout/StartWorkout.tsx"
      provides: "Updated start workout with rotation pre-fill"
  key_links:
    - from: "src/components/rotation/QuickStartCard.tsx"
      to: "src/stores/useRotationStore.ts"
      via: "selectNextTemplate selector"
      pattern: "useRotationStore|selectNextTemplate"
    - from: "src/components/workout/StartWorkout.tsx"
      to: "src/components/rotation/QuickStartCard.tsx"
      via: "QuickStartCard rendered above manual selection"
      pattern: "QuickStartCard"
---

<objective>
Add rotation-aware quick-start card to the Start Workout screen. Users see a prominent card with the next template and default gym from their active rotation, with one-tap start. Manual gym/template selection remains available below.

Purpose: ROTN-02 (pre-fill from rotation) and start workflow friction reduction.
Output: QuickStartCard component, updated StartWorkout with rotation integration.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/10-workout-features-demo-data/10-RESEARCH.md
@.planning/phases/10-workout-features-demo-data/10-CONTEXT.md
@src/components/workout/StartWorkout.tsx
@src/stores/useRotationStore.ts
@src/stores/useWorkoutStore.ts
@src/hooks/useTemplates.ts
@src/hooks/useGyms.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create QuickStartCard component</name>
  <files>src/components/rotation/QuickStartCard.tsx</files>
  <action>
Create a prominent card component that shows the next workout from the active rotation.

**Props:** `{ templates: Template[], gyms: Gym[], onStart: (templateId: string, gymId: string) => void }`

**Behavior:**
- Read from useRotationStore: activeRotationId, rotations, defaultGymId
- Find active rotation, get next template from current_position
- Find template name and gym name from props

**When active rotation exists AND default gym is set:**
- Show accent-bordered card (border-2 border-accent, bg-accent/5)
- Top line: "Workout {position+1} of {total} in {rotationName}" in text-sm text-text-secondary
- Main: template name in text-xl font-bold
- Sub: "at {gymName}" in text-text-secondary
- Big "Start Workout" Button (variant="primary", size="lg", className="w-full")
- On click: call onStart(nextTemplateId, defaultGymId)

**When NO rotation configured:**
- Show subtle hint card (bg-bg-secondary border border-border-primary)
- Text: "Set up a workout rotation in Settings for quick-start" in text-sm text-text-muted
- No button

**When rotation exists but no default gym:**
- Show hint: "Set a default gym in Settings to enable quick-start"

Use Card component from src/components/ui/ if it fits, otherwise plain div with Tailwind.
  </action>
  <verify>
`npx tsc --noEmit` passes. Component renders without errors.
  </verify>
  <done>
QuickStartCard shows next rotation workout with one-tap start, or helpful hint when rotation/gym not configured.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate QuickStartCard into StartWorkout</name>
  <files>src/components/workout/StartWorkout.tsx</files>
  <action>
Update StartWorkout to show QuickStartCard above the manual selection dropdowns.

**Changes:**
1. Import QuickStartCard
2. Import useRotationStore and read defaultGymId
3. Add QuickStartCard at the top of the component, before the gym/template selection
4. Pre-fill selectedGymId from defaultGymId (useState initializer reads from store)
5. Pre-fill selectedTemplateId from active rotation's next template
6. Create `handleQuickStart` function that receives `(templateId: string, gymId: string)` from QuickStartCard.onStart and calls `useWorkoutStore.getState().startWorkout(templateId, gymId)` (or the existing handleStart with those values). Wire it as: `<QuickStartCard ... onStart={handleQuickStart} />`

**Layout:**
```
<QuickStartCard templates={templates} gyms={gyms} onStart={handleQuickStart} />

<div className="relative">
  <div className="text-center text-sm text-text-muted py-2">or choose manually</div>
</div>

{/* Existing gym and template selection, now pre-filled */}
```

**Pre-fill logic:**
- Read defaultGymId and activeRotation.template_ids[current_position] on mount
- Use as initial state for selectedGymId and selectedTemplateId
- User can still change these (editable suggestion per CONTEXT.md)

**Do NOT:**
- Don't remove existing manual selection -- it stays below
- Don't break existing StartWorkout test (src/components/workout/StartWorkout.test.tsx if exists)
  </action>
  <verify>
`npx tsc --noEmit` passes. `npx vitest run` passes. In browser: Workouts tab shows QuickStartCard when rotation is configured, manual selection still works.
  </verify>
  <done>
Start Workout screen shows QuickStartCard with next rotation workout for one-tap start. Manual gym/template selection available below with rotation pre-fill. Hint shown when no rotation configured.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. `npx vitest run` passes
3. With active rotation + default gym: quick-start card shows next template and gym
4. Without rotation: hint banner shown suggesting Settings setup
5. Manual selection dropdowns still work independently
6. Pre-fill works: gym and template dropdowns show rotation defaults
</verification>

<success_criteria>
- QuickStartCard renders next rotation workout with position indicator
- StartWorkout pre-fills from rotation, allows manual override
- No rotation: helpful hint displayed
- All existing tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/10-workout-features-demo-data/10-02-SUMMARY.md`
</output>
