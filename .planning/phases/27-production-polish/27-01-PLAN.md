---
phase: 27-production-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - src/components/settings/ToonExportSection.tsx
autonomous: true

must_haves:
  truths:
    - "No dead code from removed comparison/progression/plateau features remains in the codebase"
    - "No orphan components, unused hooks, or unreferenced exports exist"
    - "No unused npm dependencies remain in package.json"
    - "package.json version reads 1.5.0"
    - "TypeScript strict build passes with zero errors"
    - "Production build completes with no warnings"
  artifacts:
    - path: "package.json"
      provides: "Clean dependencies and version 1.5.0"
      contains: "1.5.0"
  key_links:
    - from: "package.json"
      to: "package-lock.json"
      via: "npm install syncs lock file after version bump"
      pattern: "1.5.0"
---

<objective>
Remove all dead code from the codebase and bump version to 1.5.0.

Purpose: Clean slate for the v1.5 release -- no orphan files, unused exports, or stale dependencies. Version bump marks the milestone.
Output: Clean codebase with zero dead code, version 1.5.0, passing build.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-production-polish/27-RESEARCH.md
@.planning/phases/27-production-polish/27-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Dead code removal via knip + manual sweep</name>
  <files>
    src/components/settings/ToonExportSection.tsx
    (additional files discovered by knip analysis)
  </files>
  <action>
    1. Run `npx knip` in the project root to identify unused files, exports, and dependencies.
    2. Review knip output and categorize findings:
       - Unused files: delete them
       - Unused exports: remove the export (keep if used internally without export)
       - Unused dependencies: remove from package.json
    3. Explicitly delete `src/components/settings/ToonExportSection.tsx` (decision d24-02-02 overridden by phase 27 context -- clean slate).
    4. Remove any import of ToonExportSection from parent components.
    5. Manually verify no remnants of removed features exist:
       - Search for "comparison" imports/references in non-test files
       - Search for "progression" imports/references (the dashboard, not the word in comments)
       - Search for "plateau" imports/references
       - Search for "regression" detection references
    6. After all deletions, run `npm install` to sync package-lock.json if dependencies changed.
    7. Run `npx tsc --noEmit` to verify TypeScript still compiles.
    8. Run `npm run build` to verify production build succeeds.

    IMPORTANT: Do NOT delete test files, E2E specs, or dbt SQL models. Only delete application source code that is unused.
    IMPORTANT: If knip reports false positives (e.g., Playwright config, Vite plugins), skip those.
    IMPORTANT: Be conservative -- if unsure whether something is used dynamically, keep it.
  </action>
  <verify>
    - `npx tsc --noEmit` exits 0
    - `npm run build` exits 0
    - `grep -r "ToonExportSection" src/` returns no results
    - `npx knip` shows significantly fewer (ideally zero) unused items
  </verify>
  <done>
    ToonExportSection deleted. All knip-identified dead code removed. No stale comparison/progression/plateau references in application code. TypeScript and Vite builds pass cleanly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Version bump to 1.5.0 + build verification</name>
  <files>
    package.json
    package-lock.json
  </files>
  <action>
    1. Update `version` field in package.json from "0.0.0" to "1.5.0".
    2. Run `npm install` to sync the version into package-lock.json.
    3. Run full verification suite:
       - `npx tsc --noEmit` (TypeScript strict check)
       - `npm run build` (production build)
       - `npm run lint` (ESLint)
       - `npm run test` (Vitest unit tests)
    4. Note the build output size for documentation purposes.

    Do NOT run E2E tests here -- they are handled in Plan 03.
  </action>
  <verify>
    - `grep '"version"' package.json` shows "1.5.0"
    - `npx tsc --noEmit` exits 0
    - `npm run build` exits 0
    - `npm run lint` exits 0
    - `npm run test` exits 0
  </verify>
  <done>
    package.json shows version 1.5.0. All four checks (tsc, build, lint, unit tests) pass with zero errors.
  </done>
</task>

</tasks>

<verification>
- `npx knip` reports minimal or zero unused items
- `npm run build` succeeds
- `npx tsc --noEmit` succeeds
- `npm run test` passes
- package.json version is "1.5.0"
- No ToonExportSection file exists
</verification>

<success_criteria>
Codebase has zero dead code from removed features, no orphan files, clean dependencies, version 1.5.0, and all automated checks pass.
</success_criteria>

<output>
After completion, create `.planning/phases/27-production-polish/27-01-SUMMARY.md`
</output>
