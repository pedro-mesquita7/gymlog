---
phase: 17-pwa-performance-readme-polish
plan: 04
type: execute
wave: 2
depends_on: []
files_modified:
  - src/App.tsx
  - src/components/analytics/AnalyticsPage.tsx
  - src/components/templates/TemplateList.tsx
  - src/components/workout/StartWorkout.tsx
  - src/components/backup/BackupSettings.tsx
autonomous: true

must_haves:
  truths:
    - "Every tab has consistent loading, empty, and error states -- no blank screens or raw text"
    - "Loading states use consistent patterns (shimmer/skeleton or text-text-muted with consistent wording)"
    - "Empty states provide helpful guidance about what to do next"
    - "Error states caught by FeatureErrorBoundary provide recovery actions"
  artifacts:
    - path: "src/App.tsx"
      provides: "Consistent loading state for all tabs"
    - path: "src/components/analytics/AnalyticsPage.tsx"
      provides: "Analytics with proper loading/empty handling"
    - path: "src/components/templates/TemplateList.tsx"
      provides: "Templates with proper empty state"
  key_links:
    - from: "src/App.tsx"
      to: "src/components/ui/FeatureErrorBoundary.tsx"
      via: "Each tab wrapped in error boundary"
      pattern: "FeatureErrorBoundary"
---

<objective>
Perform a tab-by-tab UX consistency audit across Workouts, Templates, Analytics, and Settings, fixing inconsistent loading states, missing empty states, and any rough edges found.

Purpose: No UX inconsistencies should remain (POLISH-01, POLISH-02). Every screen must have proper empty, loading, and error states -- no blank screens or hanging spinners.

Output: Consistent UX patterns across all four tabs.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@src/App.tsx
@src/components/analytics/AnalyticsPage.tsx
@src/components/templates/TemplateList.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit and fix loading/empty/error states across all tabs</name>
  <files>src/App.tsx, src/components/analytics/AnalyticsPage.tsx, src/components/templates/TemplateList.tsx, src/components/workout/StartWorkout.tsx, src/components/backup/BackupSettings.tsx</files>
  <action>
Perform a systematic audit of each tab. For each, check:
- Loading state: What does the user see while data loads?
- Empty state: What does the user see with no data?
- Error state: Is FeatureErrorBoundary wrapping the content?

**Audit approach:**

1. **Read every component** rendered by each tab (App.tsx routes to components per tab)
2. **Catalog current states** -- note which components have loading/empty/error handling and which don't
3. **Fix inconsistencies** found during audit

**Expected patterns to enforce:**
- Loading text uses `text-text-muted` class and consistent phrasing: "Loading [thing]..."
- Empty states use a centered card or text block with helpful message about what to do
- All tabs already wrapped in FeatureErrorBoundary (verified in App.tsx)

**Common issues to look for:**
- Inconsistent loading text (some say "Loading...", others "Loading workouts...", etc.)
- Missing empty states (component renders nothing when data array is empty)
- Suspense fallback for Analytics matches other loading patterns
- Settings tab sections handle their own loading/empty states
- Template list empty state guides user to create templates
- Workout tab empty state when no templates exist

**For each issue found:**
- Fix inline if the change is small (< 5 lines)
- Note if a larger refactor is needed (unlikely given existing patterns)
- Ensure fixes use existing design tokens (text-text-muted, bg-bg-secondary, etc.)

**Specific checks:**

Workouts tab:
- StartWorkout: empty state when no templates (should guide to Templates tab)
- ActiveWorkout: template-not-found state (already handled in App.tsx -- verify)
- GymList/ExerciseList: loading + empty states

Templates tab:
- TemplateList: loading + empty state ("No templates yet. Create one to get started.")

Analytics tab:
- Suspense fallback consistency with other loading states
- AnalyticsPage: loading states for each section (summary stats, volume chart, etc.)
- Empty state when no workout data exists at all

Settings tab:
- BackupSettings: loading states for export/import operations
- Demo data section states
- TOON export section states

DO NOT add major new features or refactor components. This is a polish pass -- small fixes for consistency only. If everything is already consistent, document what you checked and confirm it's clean.
  </action>
  <verify>
- `npx tsc --noEmit` passes
- `npm run test` passes (no regressions)
- Each tab has been inspected for loading/empty/error patterns
- All loading text follows consistent pattern
- No blank screens possible in any tab state
  </verify>
  <done>All four tabs (Workouts, Templates, Analytics, Settings) have consistent loading, empty, and error states; no blank screens or unhandled edge cases remain</done>
</task>

<task type="auto">
  <name>Task 2: Fix any visual or interaction rough edges found during audit</name>
  <files>Files identified during Task 1 audit</files>
  <action>
Based on the audit in Task 1, fix any additional rough edges found:

**Common rough edges to check:**
- Touch targets on mobile (minimum 44x44px for interactive elements)
- Proper focus management after modal close (focus returns to trigger)
- Scroll position preservation when switching tabs
- Form validation error messages visible and accessible
- Button disabled states during async operations (prevent double-submit)
- Consistent spacing between sections (use space-y-8 or similar)
- No orphaned console.log or console.warn statements in production code

**Specific checks:**
- Dialog components: focus trap working, escape key closes, click outside closes
- Navigation: active tab indicator is visually clear
- Long content: no horizontal overflow on mobile viewport
- Dark mode: all text is readable (no low-contrast text missed by WCAG audit)

If no rough edges are found, this task completes quickly with a "clean audit" note. The goal is discovery-driven -- fix what you find, don't invent problems.

DO NOT touch chart styling, SQL queries, or data layer code. This is purely UX surface polish.
  </action>
  <verify>
- `npx tsc --noEmit` passes
- `npm run test` passes
- No console.log/console.warn statements in src/ (except legitimate error logging)
- No orphaned TODO comments that indicate incomplete work
  </verify>
  <done>All visual and interaction rough edges identified during audit are fixed; app feels cohesive across all tabs</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. `npm run test` passes
3. All four tabs audited with documented findings
4. No blank screens in any state (loading, empty, error, data present)
5. Consistent visual language across tabs
</verification>

<success_criteria>
- Tab-by-tab audit completed with findings documented
- All loading states use consistent text pattern and styling
- All empty states provide helpful guidance
- Error boundaries wrapping all tab content confirmed
- No visual rough edges remain (consistent spacing, readable text, proper touch targets)
</success_criteria>

<output>
After completion, create `.planning/phases/17-pwa-performance-readme-polish/17-04-SUMMARY.md`
</output>
