---
phase: 24-settings-ui-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ExerciseList.tsx
  - src/components/GymList.tsx
  - src/components/settings/ObservabilitySection.tsx
  - src/components/settings/DataQualitySection.tsx
  - src/components/settings/DemoDataSection.tsx
  - src/components/workout/SetRow.tsx
  - src/components/workout/SetGrid.tsx
autonomous: true

must_haves:
  truths:
    - "Collapsed Exercises section shows clean header without redundant 'Library / Exercises' subtitle inside"
    - "Collapsed Gyms section shows clean header without redundant 'Locations / Your Gyms' subtitle inside"
    - "Expanded System Observability, Data Quality, and Demo Data sections show no duplicate h2 title"
    - "Set logging rows are compact single-line layout (~64px per row instead of ~96px)"
    - "All planned sets are visible at once without progressive reveal"
    - "Touch targets for weight/reps/RIR inputs are at least 44px"
  artifacts:
    - path: "src/components/ExerciseList.tsx"
      provides: "Clean exercise list without redundant inner titles"
    - path: "src/components/GymList.tsx"
      provides: "Clean gym list without redundant inner titles"
    - path: "src/components/workout/SetRow.tsx"
      provides: "Compact single-row set logging layout"
  key_links:
    - from: "src/components/workout/SetGrid.tsx"
      to: "src/components/workout/SetRow.tsx"
      via: "reduced spacing in grid container"
      pattern: "space-y-"
---

<objective>
Clean up redundant inner titles in collapsible section children and compact the set logging grid for mobile density.

Purpose: Remove visual clutter from expandable sections (duplicate headers) and make set logging more space-efficient for real-world gym use on mobile.
Output: 5 cleaned-up section components and a compact single-line SetRow layout.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-settings-ui-polish/24-RESEARCH.md
@src/components/ExerciseList.tsx
@src/components/GymList.tsx
@src/components/settings/ObservabilitySection.tsx
@src/components/settings/DataQualitySection.tsx
@src/components/settings/DemoDataSection.tsx
@src/components/workout/SetRow.tsx
@src/components/workout/SetGrid.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove redundant inner titles from collapsible section children</name>
  <files>
    src/components/ExerciseList.tsx
    src/components/GymList.tsx
    src/components/settings/ObservabilitySection.tsx
    src/components/settings/DataQualitySection.tsx
    src/components/settings/DemoDataSection.tsx
  </files>
  <action>
    Remove the redundant inner titles from each component that appears inside a CollapsibleSection wrapper:

    **ExerciseList.tsx (lines 58-64):** Remove the entire header block containing "Library" subtitle and "Exercises" title (the `<div className="flex items-baseline justify-between mb-6">` wrapper with the inner `<div>` that has the h2 "Library" and p "Exercises"). Keep the "+ Add" button but move it to be a standalone element or integrate it differently. Replace with just the "+ Add" button aligned right:
    ```
    <div className="flex justify-end mb-4">
      <button onClick={() => setShowForm(true)} ...>+ Add</button>
    </div>
    ```

    **GymList.tsx (lines 52-64):** Same pattern. Remove the header block with "Locations" subtitle and "Your Gyms" title. Keep just the "+ Add" button aligned right:
    ```
    <div className="flex justify-end mb-4">
      <button onClick={() => setShowForm(true)} ...>+ Add</button>
    </div>
    ```

    **ObservabilitySection.tsx:** Remove all three `<h2>System Observability</h2>` elements (in loading state at line 27, error state at line 38, and main render at line 48). Keep the wrapping `<section>` but remove the h2 lines. The title is already shown by the CollapsibleSection wrapper in BackupSettings.tsx.

    **DataQualitySection.tsx (line 46):** Remove the `<h2>Data Quality</h2>` element. Keep the wrapping `<section>` tag.

    **DemoDataSection.tsx (line 76):** Remove the `<h2>Demo & Data Management</h2>` element. Keep the wrapping `<section>` tag.

    For all five components, also remove the outer `<section>` wrapper if it only served as a container for the h2 + content. Replace with a fragment or div as needed.
  </action>
  <verify>
    Run `npx tsc --noEmit` to verify no TypeScript errors.
    Run `npx vitest run` to verify existing tests still pass.
    Grep for the removed titles to confirm they're gone:
    - `grep -r "Library" src/components/ExerciseList.tsx` should not find the subtitle
    - `grep -r "Locations" src/components/GymList.tsx` should not find the subtitle
    - `grep -r "System Observability" src/components/settings/ObservabilitySection.tsx` should find zero h2 tags
    - `grep -r "Data Quality" src/components/settings/DataQualitySection.tsx` should find zero h2 tags
    - `grep -r "Demo & Data Management" src/components/settings/DemoDataSection.tsx` should find zero h2 tags
  </verify>
  <done>
    All 5 components render without redundant inner titles when placed inside CollapsibleSection wrappers. No duplicate headings visible when expanding any section.
  </done>
</task>

<task type="auto">
  <name>Task 2: Compact single-line SetRow layout for mobile density</name>
  <files>
    src/components/workout/SetRow.tsx
    src/components/workout/SetGrid.tsx
  </files>
  <action>
    Redesign SetRow from a two-row layout (header + inputs) to a compact single-row layout:

    **SetRow.tsx - Replace the entire return JSX with a compact single-line design:**

    Current layout (~96px per row):
    - Row 1: set number circle (w-8 h-8) + PR badge + remove button
    - Row 2: 3-column input grid with labels above each input
    - Container: p-4 space-y-3

    New compact layout (~64px per row):
    - Single row: small set number (w-6 h-6) + 3 inline inputs (no labels above) + remove button
    - Container: p-2.5, no space-y
    - PR badge: small text below the row if applicable

    Specific changes:
    1. Change outer div from `p-4 space-y-3` to `p-2.5`
    2. Merge header and input grid into a single flex row: `flex items-center gap-2`
    3. Set number: reduce from `w-8 h-8 text-sm` to `w-6 h-6 text-xs` and add `flex-shrink-0`
    4. Remove individual `<label>` elements above inputs (Weight/Reps/RIR labels). Users learn the column positions quickly.
    5. Keep the 3-column grid for inputs but reduce gap from `gap-3` to `gap-2` and make it `flex-1`
    6. Input styling: add `py-2 px-2.5 text-sm text-center` to keep min 44px touch targets. Add placeholder text that indicates what each field is: use ghost data values as placeholders (already done), but also add the field name as part of the placeholder when no ghost data exists (e.g., "Weight", "Reps", "RIR").
    7. Remove button: keep inline at the end, reduce to `text-xs p-1 flex-shrink-0`
    8. PR badge: if prStatus exists, render as a small `text-xs` span below the main row with `ml-8` indent
    9. Keep all data-testid attributes unchanged for E2E test compatibility
    10. Keep delta arrows on inputs (the absolute-positioned up/down indicators)

    **SetGrid.tsx - Reduce spacing between rows:**
    Change the set rows container from `space-y-3` to `space-y-2` to further tighten the grid.

    Do NOT change the Input component itself or any hook logic. Only layout/styling changes.
  </action>
  <verify>
    Run `npx tsc --noEmit` to verify no TypeScript errors.
    Run `npx vitest run` to verify existing tests still pass.
    Visually inspect: each SetRow should be approximately 48-64px tall (single line with inputs).
  </verify>
  <done>
    SetRow renders as a compact single-line layout with set number, 3 inline inputs, and remove button all on one row. Touch targets remain at least 44px. All planned sets are visible at once without scrolling on typical mobile screen (4 sets visible).
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npx vitest run` passes all existing tests
3. No duplicate h2 titles in any collapsible section child component
4. SetRow is visually compact (single-line layout)
5. All data-testid attributes preserved for E2E compatibility
</verification>

<success_criteria>
- Collapsed Exercises/Gyms sections expand without showing redundant subtitles
- System Observability, Data Quality, Demo Data sections show no duplicate h2
- Set logging rows are compact single-line with inline inputs
- All existing tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/24-settings-ui-polish/24-01-SUMMARY.md`
</output>
