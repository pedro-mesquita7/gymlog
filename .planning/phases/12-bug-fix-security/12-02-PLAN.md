---
phase: 12-bug-fix-security
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/analytics/AnalyticsPage.tsx
  - src/components/workout/ExerciseView.tsx
  - src/components/workout/ActiveWorkout.tsx
autonomous: true

must_haves:
  truths:
    - "One analytics chart crashing does not take down the entire Analytics tab"
    - "A failing chart shows an inline error card with retry button and expandable details"
    - "SetLogger or ExerciseHistory crashing in workout view shows error card, not blank screen"
  artifacts:
    - path: "src/components/analytics/AnalyticsPage.tsx"
      provides: "Per-chart FeatureErrorBoundary wrappers"
      contains: "FeatureErrorBoundary"
    - path: "src/components/workout/ExerciseView.tsx"
      provides: "Error boundary around ExerciseHistory and PRList"
      contains: "FeatureErrorBoundary"
    - path: "src/components/workout/ActiveWorkout.tsx"
      provides: "Error boundary around SetLogger"
      contains: "FeatureErrorBoundary"
  key_links:
    - from: "AnalyticsPage.tsx"
      to: "FeatureErrorBoundary"
      via: "import and wrap each chart component"
      pattern: "FeatureErrorBoundary.*feature="
---

<objective>
Fix BUG-02: Add sub-component error boundaries to analytics charts, history views, and workout logging components. Each independent feature section gets its own FeatureErrorBoundary so one component crashing shows an inline error card with retry, not a blank tab.

Purpose: Users encounter errors gracefully -- descriptive error card with recovery action instead of broken screen.
Output: FeatureErrorBoundary wrappers around all independent sub-components in analytics, history, and workout views.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-bug-fix-security/12-RESEARCH.md

@src/components/analytics/AnalyticsPage.tsx
@src/components/ui/FeatureErrorBoundary.tsx
@src/components/workout/ExerciseView.tsx
@src/components/workout/ActiveWorkout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add error boundaries to Analytics sub-components</name>
  <files>src/components/analytics/AnalyticsPage.tsx</files>
  <action>
  Import `FeatureErrorBoundary` from `../ui/FeatureErrorBoundary` into AnalyticsPage.tsx.

  Wrap each independent chart/card component in a `FeatureErrorBoundary` with a descriptive `feature` name:

  1. `ExerciseProgressChart` -> `<FeatureErrorBoundary feature="Exercise Progress Chart">`
  2. `WeekComparisonCard` -> `<FeatureErrorBoundary feature="Week Comparison">`
  3. `PRListCard` -> `<FeatureErrorBoundary feature="Personal Records">`
  4. `VolumeBarChart` -> `<FeatureErrorBoundary feature="Volume Chart">`
  5. `VolumeZoneIndicator` -> `<FeatureErrorBoundary feature="Volume Zones">`
  6. `MuscleHeatMap` -> `<FeatureErrorBoundary feature="Muscle Heat Map">`
  7. `ProgressionDashboard` -> `<FeatureErrorBoundary feature="Progression Dashboard">`

  Place the boundary INSIDE any existing CollapsibleSection wrappers (so the section header still shows even if content errors). If a chart is already inside a CollapsibleSection, wrap just the chart content, not the section itself.

  Do NOT add boundaries around container divs, loading states, or exercise selectors -- only around data-rendering components that could throw.
  </action>
  <verify>
  - `npx tsc --noEmit` passes
  - `npm run build` succeeds
  - Grep AnalyticsPage.tsx for `FeatureErrorBoundary` -- should find 7 instances
  </verify>
  <done>All 7 analytics sub-components wrapped in individual FeatureErrorBoundary. One chart failing shows error card with retry, other charts continue rendering.</done>
</task>

<task type="auto">
  <name>Task 2: Add error boundaries to workout and history sub-components</name>
  <files>src/components/workout/ExerciseView.tsx, src/components/workout/ActiveWorkout.tsx</files>
  <action>
  In `ExerciseView.tsx`:
  - Import `FeatureErrorBoundary` from `../ui/FeatureErrorBoundary`
  - Wrap the `ExerciseHistory` component usage in `<FeatureErrorBoundary feature="Exercise History">`
  - If PRList is rendered separately in this file, wrap it too with `<FeatureErrorBoundary feature="Personal Records">`

  In `ActiveWorkout.tsx`:
  - Import `FeatureErrorBoundary` from `../ui/FeatureErrorBoundary`
  - Wrap the `SetLogger` component (or the per-exercise logging section) in `<FeatureErrorBoundary feature="Set Logger">`
  - Wrap at the per-exercise level if possible, so one exercise's logger crashing doesn't affect others

  Do NOT wrap the entire ActiveWorkout in a boundary (that's already covered by the tab-level boundary in App.tsx). Only wrap the sub-components that independently render data.
  </action>
  <verify>
  - `npx tsc --noEmit` passes
  - `npm run build` succeeds
  - `npm test` passes
  - Grep ExerciseView.tsx for `FeatureErrorBoundary` -- should find at least 1 instance
  - Grep ActiveWorkout.tsx for `FeatureErrorBoundary` -- should find at least 1 instance
  </verify>
  <done>ExerciseHistory, PRList (if present), and SetLogger wrapped in FeatureErrorBoundary. Sub-component failures show inline error card with retry.</done>
</task>

</tasks>

<verification>
- TypeScript compilation succeeds
- Build succeeds
- All existing tests pass
- FeatureErrorBoundary used in AnalyticsPage (7 instances), ExerciseView (1+), ActiveWorkout (1+)
- Tab-level boundaries in App.tsx remain unchanged
</verification>

<success_criteria>
Every independent analytics chart, history view, and workout logger sub-component has its own error boundary. A single component failure shows an inline error card with retry button and expandable details, without affecting sibling components.
</success_criteria>

<output>
After completion, create `.planning/phases/12-bug-fix-security/12-02-SUMMARY.md`
</output>
