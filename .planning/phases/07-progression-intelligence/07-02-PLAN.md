---
phase: 07-progression-intelligence
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - src/components/analytics/ProgressionDashboard.tsx
  - src/components/analytics/ProgressionStatusCard.tsx
  - src/components/analytics/AnalyticsPage.tsx
autonomous: true

must_haves:
  truths:
    - "User can view progression dashboard showing status (progressing/plateau/regressing) per exercise"
    - "User sees summary counts at top: N progressing, N plateaued, N regressing"
    - "Status cards show exercise name, muscle group, status badge, last PR date, session count, and drop percentages for regression"
    - "Cards sorted problems-first: regressing > plateau > progressing, then alphabetical"
    - "Dashboard appears in AnalyticsPage under Progression Intelligence heading"
  artifacts:
    - path: "src/components/analytics/ProgressionDashboard.tsx"
      provides: "Dashboard container with summary counts and status card list"
      exports: ["ProgressionDashboard"]
      min_lines: 50
    - path: "src/components/analytics/ProgressionStatusCard.tsx"
      provides: "Individual exercise status card with icon, color, badge, details"
      exports: ["ProgressionStatusCard"]
      min_lines: 40
    - path: "src/components/analytics/AnalyticsPage.tsx"
      provides: "Updated page with Progression Intelligence section"
      contains: "ProgressionDashboard"
  key_links:
    - from: "src/components/analytics/ProgressionDashboard.tsx"
      to: "src/hooks/useProgressionStatus.ts"
      via: "imports useProgressionStatus hook"
      pattern: "useProgressionStatus"
    - from: "src/components/analytics/ProgressionDashboard.tsx"
      to: "src/hooks/useExercises.ts"
      via: "imports useExercises for exercise names"
      pattern: "useExercises"
    - from: "src/components/analytics/AnalyticsPage.tsx"
      to: "src/components/analytics/ProgressionDashboard.tsx"
      via: "renders ProgressionDashboard inside CollapsibleSection"
      pattern: "ProgressionDashboard"
---

<objective>
Build the Progression Intelligence dashboard: summary counts (progressing/plateaued/regressing), status cards per exercise sorted problems-first, and integrate into AnalyticsPage.

Purpose: PROG-03 requirement -- user can view progression dashboard showing status per exercise. This gives users a bird's-eye view of their training progress across all exercises.
Output: ProgressionDashboard, ProgressionStatusCard components, updated AnalyticsPage.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-progression-intelligence/07-CONTEXT.md
@.planning/phases/07-progression-intelligence/07-RESEARCH.md
@.planning/phases/07-progression-intelligence/07-01-SUMMARY.md
@src/components/analytics/AnalyticsPage.tsx
@src/components/analytics/CollapsibleSection.tsx
@src/hooks/useExercises.ts
@src/types/analytics.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ProgressionStatusCard and ProgressionDashboard components</name>
  <files>
    src/components/analytics/ProgressionStatusCard.tsx
    src/components/analytics/ProgressionDashboard.tsx
  </files>
  <action>
1. Create `src/components/analytics/ProgressionStatusCard.tsx`:
   - Props: exerciseId, exerciseName, muscleGroup, status ('progressing'|'plateau'|'regressing'|'unknown'), lastPrDate (string|null), sessionCount4wk (number), weightDropPct (number|null), volumeDropPct (number|null)
   - Status config object mapping each status to: icon (arrow characters: up-right for progressing, right for plateau, down-right for regressing), bgColor, borderColor, textColor, badge text -- all using Tailwind classes with dark theme (bg-green-900/20, bg-yellow-900/20, bg-red-900/20, bg-zinc-800/20)
   - Display: exercise name + muscle group label, status icon + badge, last PR date using formatDistanceToNow from date-fns (with addSuffix: true), session count, and for regressing status show weight/volume drop percentages in red
   - Handle null lastPrDate: show "No PRs recorded yet"
   - Follow exact pattern from RESEARCH.md ProgressionStatusCard example

2. Create `src/components/analytics/ProgressionDashboard.tsx`:
   - Import useProgressionStatus hook and useExercises hook
   - Summary counts section: 3-column grid with colored cards showing count for each status (green for progressing, yellow for plateau, red for regressing)
   - Join progression data with exercise names via useMemo (match on exerciseId to exercise.exercise_id)
   - Sort: regressing first (0), then plateau (1), then progressing (2), then unknown (3), then alphabetical by name within same status
   - Map sorted status to ProgressionStatusCard components
   - Loading state: "Loading progression data..." centered text
   - Error state: red error message
   - Empty state: if no data, show "Not enough workout data yet. Log 2+ sessions per exercise to see progression analysis."
   - Follow RESEARCH.md ProgressionDashboard pattern
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - Both components export correctly
    - ProgressionDashboard imports useProgressionStatus and useExercises
    - ProgressionStatusCard uses formatDistanceToNow from date-fns
  </verify>
  <done>
    Dashboard shows summary counts and sorted status cards for all exercises with progression data. Each card displays status-specific styling, last PR info, and regression details.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate ProgressionDashboard into AnalyticsPage</name>
  <files>
    src/components/analytics/AnalyticsPage.tsx
  </files>
  <action>
1. Add imports to AnalyticsPage.tsx:
   - Import ProgressionDashboard from './ProgressionDashboard'

2. Add Progression Intelligence section to the JSX, placed AFTER the Volume Analytics sections (after Training Balance Heat Map) following the same visual divider pattern used for Volume Analytics:
   ```jsx
   {/* Visual Divider between volume and progression sections */}
   <div className="border-t-2 border-zinc-700 pt-8 mt-8">
     <h2 className="text-xl font-bold text-zinc-100 mb-6">Progression Intelligence</h2>
   </div>

   <CollapsibleSection title="Exercise Progression Status" defaultOpen={true}>
     <ProgressionDashboard />
   </CollapsibleSection>
   ```

3. Place this AFTER the existing Training Balance Heat Map CollapsibleSection but BEFORE the closing `</div>`. This puts it at the bottom of the page since it's a new major section.

Do NOT modify any existing sections. Only add the new section at the end.
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `npm run build` succeeds
    - AnalyticsPage.tsx imports and renders ProgressionDashboard
    - New section uses CollapsibleSection wrapper matching existing pattern
  </verify>
  <done>
    AnalyticsPage displays Progression Intelligence section with dashboard showing all exercise statuses. User can see summary counts and individual status cards.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` -- all TypeScript compiles
2. `npm run build` -- Vite build succeeds
3. AnalyticsPage renders ProgressionDashboard in CollapsibleSection
4. Dashboard shows summary counts grid (3 columns: progressing, plateaued, regressing)
5. Status cards display with correct colors, icons, and sorting
</verification>

<success_criteria>
- PROG-03 satisfied: User can view progression dashboard showing status per exercise
- Summary counts visible at top of dashboard section
- Cards sorted problems-first with status-specific styling
- Dashboard integrated into AnalyticsPage as new "Progression Intelligence" section
</success_criteria>

<output>
After completion, create `.planning/phases/07-progression-intelligence/07-02-SUMMARY.md`
</output>
