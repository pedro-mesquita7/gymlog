---
phase: 22-bug-fixes-theme
plan: 02
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - src/components/analytics/ExerciseProgressChart.tsx
  - src/components/analytics/MuscleHeatMap.tsx
  - src/components/analytics/VolumeZoneIndicator.tsx
  - src/components/ExerciseForm.tsx
autonomous: true

must_haves:
  truths:
    - "Charts render with teal/cool colors, no orange or legacy HSL references"
    - "Volume zone indicators use teal gradient instead of red/yellow/green"
    - "MuscleHeatMap body diagram uses teal gradient fills"
    - "No hardcoded orange colors remain in any component"
  artifacts:
    - path: "src/components/analytics/ExerciseProgressChart.tsx"
      provides: "Chart with OKLCH color references"
      contains: "var(--color-accent)"
    - path: "src/components/analytics/MuscleHeatMap.tsx"
      provides: "Teal gradient heat map fills"
      contains: "oklch.*185"
    - path: "src/components/analytics/VolumeZoneIndicator.tsx"
      provides: "Teal zone color indicators"
    - path: "src/components/ExerciseForm.tsx"
      provides: "No hardcoded orange classes"
  key_links:
    - from: "src/components/analytics/ExerciseProgressChart.tsx"
      to: "src/index.css"
      via: "var(--color-accent) CSS variable"
      pattern: "var\\(--color-(accent|chart)"
---

<objective>
Migrate hardcoded colors in chart components and forms to use the new teal token system.

Purpose: Charts and visualizations are the main places where colors are hardcoded outside the CSS token system. This plan fixes all of them so the entire app reflects the new palette.
Output: All chart components and ExerciseForm using teal palette with no hardcoded orange or legacy HSL.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-bug-fixes-theme/22-CONTEXT.md
@.planning/phases/22-bug-fixes-theme/22-RESEARCH.md
@src/components/analytics/ExerciseProgressChart.tsx
@src/components/analytics/MuscleHeatMap.tsx
@src/components/analytics/VolumeZoneIndicator.tsx
@src/components/ExerciseForm.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate ExerciseProgressChart from legacy HSL to OKLCH tokens</name>
  <files>src/components/analytics/ExerciseProgressChart.tsx</files>
  <action>
Replace all legacy HSL color references with OKLCH CSS variable references:

- `hsl(var(--accent))` -> `var(--color-accent)` (all occurrences — stroke, fill, dot)
- `hsl(var(--chart-success))` -> `var(--color-chart-success)` (all occurrences)
- `hsl(var(--chart-primary))` -> `var(--color-chart-primary)` (all occurrences)
- `hsl(var(--chart-muted))` -> `var(--color-chart-muted)` (all occurrences, if present)

Search for any remaining `hsl(var(` patterns in this file and replace them all.

This works because Plan 01 removed the legacy HSL tokens from index.css and the OKLCH tokens are the canonical source now. Recharts accepts CSS custom property values for stroke/fill attributes.
  </action>
  <verify>Run `grep "hsl(var" src/components/analytics/ExerciseProgressChart.tsx` — should return zero results. Run `grep "var(--color-" src/components/analytics/ExerciseProgressChart.tsx` — should return results for accent, chart-primary, chart-success.</verify>
  <done>ExerciseProgressChart uses only `var(--color-*)` OKLCH token references. No `hsl(var(` patterns remain.</done>
</task>

<task type="auto">
  <name>Task 2: Update MuscleHeatMap, VolumeZoneIndicator, and ExerciseForm colors</name>
  <files>src/components/analytics/MuscleHeatMap.tsx, src/components/analytics/VolumeZoneIndicator.tsx, src/components/ExerciseForm.tsx</files>
  <action>
**MuscleHeatMap.tsx:**
Update all hardcoded OKLCH color values in the JavaScript objects (zone color maps, default fills) to use the new teal gradient. The research identified hardcoded values at approximately lines 28-33 and 39-43.

Replace the volume zone color mapping with teal gradient values:
- under: `oklch(80% 0.08 185)` (lightest teal)
- minimum: `oklch(70% 0.10 185)`
- optimal: `oklch(60% 0.12 185)`
- high: `oklch(48% 0.10 185)`
- over: `oklch(38% 0.08 185)` (darkest teal)

Also update the default/neutral fill color from any warm tone to a neutral cool gray, e.g. `oklch(25% 0.005 220)`.

Keep the OKLCH values as hardcoded strings (not CSS variables) since SVG fill attributes may not resolve CSS custom properties in all browsers. This is the established pattern for this component.

**VolumeZoneIndicator.tsx:**
This component uses Tailwind classes like `bg-error`, `bg-success`, `bg-warning` for zone color indicators. Replace these with the correct zone-specific classes:
- under zone: `bg-chart-zone-under`
- minimum zone: `bg-chart-zone-minimum`
- optimal zone: `bg-chart-zone-optimal`
- high zone: `bg-chart-zone-high`
- over zone: `bg-chart-zone-over`

Read the file first to understand the exact current class usage, then replace each zone's color class with the corresponding `bg-chart-zone-*` class. This maps to the `--color-chart-zone-*` tokens defined in index.css.

**ExerciseForm.tsx:**
Replace `bg-orange-950/30` with `bg-teal-950/30` (or the closest Tailwind teal equivalent). This is a hardcoded Tailwind orange class that bypasses the token system.
  </action>
  <verify>Run `grep -rn "oklch.*45\|orange\|hsl(var" src/components/analytics/MuscleHeatMap.tsx src/components/analytics/VolumeZoneIndicator.tsx src/components/ExerciseForm.tsx` — should return zero results (no orange hue, no legacy HSL). Run `grep "185" src/components/analytics/MuscleHeatMap.tsx` — should return teal zone values.</verify>
  <done>MuscleHeatMap uses teal gradient OKLCH values. VolumeZoneIndicator uses `bg-chart-zone-*` classes. ExerciseForm has no hardcoded orange. All three components reflect the new palette.</done>
</task>

</tasks>

<verification>
1. `grep -rn "hsl(var\|orange\|oklch.*45)" src/components/analytics/ src/components/ExerciseForm.tsx` returns zero results
2. `grep "185" src/components/analytics/MuscleHeatMap.tsx` returns teal OKLCH values
3. `grep "var(--color-" src/components/analytics/ExerciseProgressChart.tsx` returns OKLCH variable references
4. `npx tsc --noEmit` passes
5. `npx vite build` succeeds
</verification>

<success_criteria>
- ExerciseProgressChart uses `var(--color-*)` references (no legacy HSL)
- MuscleHeatMap uses teal gradient hardcoded OKLCH values (hue 185)
- VolumeZoneIndicator uses `bg-chart-zone-*` Tailwind classes
- ExerciseForm has no hardcoded orange classes
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/22-bug-fixes-theme/22-02-SUMMARY.md`
</output>
