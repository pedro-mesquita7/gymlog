---
phase: 18-theme-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/index.css
  - src/components/ui/Card.tsx
  - src/components/ui/Button.tsx
  - src/components/ui/Input.tsx
  - src/components/ui/Dialog.tsx
  - src/components/ui/NumberStepper.tsx
  - src/components/ui/ErrorCard.tsx
autonomous: true

must_haves:
  truths:
    - "Background tones are warmer (hue shifted from 270 cool-blue toward 50-80 warm range)"
    - "Cards have visible rounded corners (16px radius) and soft drop shadows"
    - "Buttons, inputs, and dialogs use updated radius tokens"
    - "New shadow and gradient CSS custom properties exist in the theme"
  artifacts:
    - path: "src/index.css"
      provides: "Updated OKLCH tokens, new shadow tokens, updated radius tokens"
      contains: "--color-bg-primary"
    - path: "src/components/ui/Card.tsx"
      provides: "Card with shadow and rounded-2xl"
      contains: "shadow"
  key_links:
    - from: "src/index.css"
      to: "all components"
      via: "CSS custom properties consumed by Tailwind utilities"
      pattern: "--color-bg-primary|--radius-lg|--shadow-card"
---

<objective>
Update the OKLCH token system in index.css to a warm, soft, modern dark aesthetic and apply the new design language to all UI primitive components (Card, Button, Input, Dialog, NumberStepper, ErrorCard).

Purpose: This is the foundation plan. Token changes propagate globally through Tailwind utilities, so every component inherits the new color palette. UI primitives are the highest-leverage files -- Card alone is used in 20+ places.
Output: Updated index.css with warm OKLCH tokens, new shadow/gradient/radius tokens, and 6 updated UI primitive components.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/18-theme-redesign/18-CONTEXT.md
@.planning/phases/18-theme-redesign/18-RESEARCH.md
@src/index.css
@src/components/ui/Card.tsx
@src/components/ui/Button.tsx
@src/components/ui/Input.tsx
@src/components/ui/Dialog.tsx
@src/components/ui/NumberStepper.tsx
@src/components/ui/ErrorCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update OKLCH tokens, add shadow/gradient/radius tokens</name>
  <files>src/index.css</files>
  <action>
Update the @theme block in index.css with the following changes:

**Background layers -- shift hue from 270 (cool blue-gray) to ~60 (warm neutral):**
- --color-bg-primary: warm dark, ~oklch(16% 0.01 60) — page background
- --color-bg-secondary: ~oklch(20% 0.012 60) — card backgrounds
- --color-bg-tertiary: ~oklch(25% 0.012 60) — input backgrounds, hover
- --color-bg-elevated: ~oklch(28% 0.012 60) — elevated surfaces, active

**Text hierarchy -- keep high lightness, shift hue warm:**
- --color-text-primary: ~oklch(92% 0.005 60) — primary text
- --color-text-secondary: ~oklch(72% 0.01 60) — secondary
- --color-text-muted: ~oklch(58% 0.01 60) — muted (must maintain 4.5:1 against bg-primary)

**Borders -- shift warm:**
- --color-border-primary: ~oklch(25% 0.01 60)
- --color-border-secondary: ~oklch(36% 0.01 60)

**Accent -- keep vibrant orange (already warm). Keep as-is or minor tweak.**

**Semantic colors -- keep saturated. No changes.**

**Chart colors -- keep saturated. No changes to chart-primary, chart-success. Shift chart-muted warm:**
- --color-chart-muted: ~oklch(55% 0.02 60)

**Chart tooltip -- shift warm:**
- --color-chart-tooltip-bg: ~oklch(13% 0.01 60)
- --color-chart-tooltip-border: ~oklch(20% 0.01 60)

**Legacy HSL -- update to match new warm palette:**
- --chart-primary: keep as-is (blue data series)
- --chart-success: keep as-is (green)
- --chart-muted: shift warmer (e.g., 40 5% 65%)
- --accent: keep as-is (orange)

**NEW -- Border radius tokens (update existing):**
- --radius-sm: 0.5rem (8px)
- --radius-md: 0.75rem (12px)
- --radius-lg: 1rem (16px)

**NEW -- Shadow tokens (add to @theme):**
- --shadow-card: 0 2px 8px oklch(0% 0 0 / 0.25), 0 1px 3px oklch(0% 0 0 / 0.15)
- --shadow-card-hover: 0 4px 16px oklch(0% 0 0 / 0.3), 0 2px 6px oklch(0% 0 0 / 0.2)
- --shadow-dialog: 0 8px 32px oklch(0% 0 0 / 0.4), 0 4px 12px oklch(0% 0 0 / 0.25)
- --shadow-nav: 0 -1px 8px oklch(0% 0 0 / 0.2)

**NEW -- Card gradient token (add to @theme):**
- --gradient-card-surface: linear-gradient(to bottom, oklch(22% 0.012 60), oklch(20% 0.012 60))

Note: Use your discretion on exact OKLCH values within the warm/muted direction. The key constraint is:
1. Hue in 50-80 range (warm neutral, not blue/cool)
2. Low chroma (0.01-0.015 for backgrounds, keeping accents saturated)
3. Text-muted must maintain 4.5:1 contrast ratio against bg-primary (calculate: if bg L=16%, text needs L >= ~57%)
4. Verify Tailwind v4 generates utility classes for new --shadow-* tokens. If not, add them as standalone CSS custom properties outside @theme and create corresponding @utility rules or use arbitrary values.
  </action>
  <verify>
Run `npm run build` to ensure no CSS compilation errors. Grep for the new tokens: `grep -c "shadow-card\|gradient-card\|radius-lg" src/index.css` should return >= 3.
  </verify>
  <done>index.css has warm OKLCH tokens (hue ~60), new shadow tokens, updated radius tokens (16px for lg), and card gradient token. Build succeeds.</done>
</task>

<task type="auto">
  <name>Task 2: Update UI primitive components</name>
  <files>
    src/components/ui/Card.tsx
    src/components/ui/Button.tsx
    src/components/ui/Input.tsx
    src/components/ui/Dialog.tsx
    src/components/ui/NumberStepper.tsx
    src/components/ui/ErrorCard.tsx
  </files>
  <action>
**Card.tsx:**
- Replace `rounded-lg` with `rounded-2xl` (maps to --radius-lg = 16px via Tailwind)
- Add shadow: `shadow-[var(--shadow-card)]` (or if Tailwind auto-generates from @theme, use the utility directly)
- Remove any border classes (shadow replaces border for depth)
- For default variant: add background gradient if feasible (background: var(--gradient-card-surface)) via arbitrary Tailwind or inline style
- For interactive variant: add hover shadow `hover:shadow-[var(--shadow-card-hover)]` and transition-shadow

**Button.tsx:**
- Replace `rounded-lg` with `rounded-2xl`
- Keep all variant colors as-is (accent stays saturated per design direction)

**Input.tsx:**
- Replace `rounded-lg` with `rounded-xl` (12px for inputs -- tighter than cards per context decision)
- Soften border: change `border border-border-secondary` to `border border-border-primary` (subtler)
- On focus, keep `focus:border-accent`

**Dialog.tsx:**
- Replace `rounded-lg` with `rounded-2xl`
- Add shadow: `shadow-[var(--shadow-dialog)]`
- Backdrop already has bg-black/50, keep it

**NumberStepper.tsx:**
- Replace all `rounded-lg` with `rounded-xl` for buttons and input (match Input.tsx)
- Keep existing bg-bg-elevated and bg-bg-tertiary classes

**ErrorCard.tsx:**
- Read the file first to understand current structure
- Replace `rounded-lg` with `rounded-2xl`
- Add shadow matching Card.tsx pattern

IMPORTANT: If Tailwind v4 does NOT auto-generate utility classes for custom --shadow-* properties defined in @theme, use arbitrary value syntax: `shadow-[var(--shadow-card)]`. Test by checking build output. If arbitrary shadow values cause issues, apply shadows via inline `style={{ boxShadow: 'var(--shadow-card)' }}` as fallback.
  </action>
  <verify>
Run `npm run build` -- no errors. Run `grep -r "rounded-lg" src/components/ui/` -- should return 0 matches (all migrated to rounded-2xl or rounded-xl). Run `grep -r "shadow" src/components/ui/Card.tsx` -- should find shadow class.
  </verify>
  <done>All 6 UI primitive files use rounded-2xl (cards/buttons/dialogs) or rounded-xl (inputs/steppers), Card and Dialog have shadow tokens applied, no rounded-lg remains in ui/ directory.</done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with no errors
2. `grep "rounded-lg" src/components/ui/*.tsx` returns no matches
3. `grep "shadow" src/components/ui/Card.tsx src/components/ui/Dialog.tsx` returns matches
4. Token hues in index.css are in warm range (50-80), not cool (270)
5. --radius-lg value is 1rem (16px)
</verification>

<success_criteria>
- All OKLCH background tokens shifted from cool (hue 270) to warm (hue ~60)
- New shadow tokens (card, card-hover, dialog, nav) defined
- New card gradient token defined
- Radius tokens updated (sm=8px, md=12px, lg=16px)
- All 6 UI primitives updated with new radius and shadow classes
- Build compiles successfully
</success_criteria>

<output>
After completion, create `.planning/phases/18-theme-redesign/18-01-SUMMARY.md`
</output>
