---
phase: 19-plans-rename
plan: 02
type: execute
wave: 2
depends_on: ["19-01"]
files_modified:
  - src/components/plans/PlanList.tsx
  - src/components/plans/PlanCard.tsx
  - src/components/plans/PlanBuilder.tsx
  - src/components/plans/ExerciseList.tsx
  - src/components/plans/ExerciseRow.tsx
  - src/App.tsx
  - src/components/Navigation.tsx
  - src/components/workout/StartWorkout.tsx
  - src/components/workout/ActiveWorkout.tsx
  - src/components/workout/WorkoutComplete.tsx
  - src/components/workout/ExerciseView.tsx
  - src/components/workout/SetGrid.tsx
  - src/components/workout/RestTimer.tsx
  - src/components/workout/ExerciseSubstitution.tsx
  - src/components/workout/ProgressionAlert.tsx
  - src/components/workout/RecentWorkoutCard.tsx
  - src/components/rotation/RotationEditor.tsx
  - src/components/rotation/QuickStartCard.tsx
  - src/components/settings/RotationSection.tsx
  - src/components/settings/ToonExportSection.tsx
  - src/components/settings/DemoDataSection.tsx
autonomous: true

must_haves:
  truths:
    - "Tab label reads 'Plans' (not 'Templates')"
    - "All CRUD buttons say Create Plan, Edit Plan, Delete Plan (not Template)"
    - "Toast messages say 'Plan created', 'Plan deleted', etc."
    - "Component file names are PlanList, PlanCard, PlanBuilder (not Template*)"
    - "data-testid values use plan- prefix (nav-plans, btn-create-plan, etc.)"
    - "Rotation UI text references 'plans' not 'templates'"
  artifacts:
    - path: "src/components/plans/PlanList.tsx"
      provides: "Plan list component"
      contains: "PlanList"
    - path: "src/components/plans/PlanCard.tsx"
      provides: "Plan card component"
      contains: "PlanCard"
    - path: "src/components/plans/PlanBuilder.tsx"
      provides: "Plan builder/editor component"
      contains: "PlanBuilder"
    - path: "src/components/Navigation.tsx"
      provides: "Navigation with Plans tab"
      contains: "nav-plans"
  key_links:
    - from: "src/App.tsx"
      to: "src/components/plans/PlanList.tsx"
      via: "import and JSX rendering"
      pattern: "import.*PlanList.*from.*plans"
    - from: "src/components/Navigation.tsx"
      to: "src/App.tsx"
      via: "Tab type 'plans'"
      pattern: "'plans'"
    - from: "src/components/plans/PlanList.tsx"
      to: "src/hooks/usePlans.ts"
      via: "usePlans hook import"
      pattern: "import.*usePlans.*from.*hooks/usePlans"
---

<objective>
Rename all component files and update every component that references "Template" to use "Plan" terminology.

Purpose: Complete the user-facing rename so every screen shows "Plans" instead of "Templates".
Output: All component files renamed, all UI text updated, all imports pointing to new paths.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-plans-rename/19-CONTEXT.md
@.planning/phases/19-plans-rename/19-RESEARCH.md
@.planning/phases/19-plans-rename/19-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename component directory and files</name>
  <files>
    src/components/templates/ -> src/components/plans/
    src/components/plans/PlanList.tsx (was TemplateList.tsx)
    src/components/plans/PlanCard.tsx (was TemplateCard.tsx)
    src/components/plans/PlanBuilder.tsx (was TemplateBuilder.tsx)
    src/components/plans/ExerciseList.tsx
    src/components/plans/ExerciseRow.tsx
  </files>
  <action>
    **Step 1: Rename directory and files using git mv**
    ```bash
    git mv src/components/templates src/components/plans
    git mv src/components/plans/TemplateList.tsx src/components/plans/PlanList.tsx
    git mv src/components/plans/TemplateCard.tsx src/components/plans/PlanCard.tsx
    git mv src/components/plans/TemplateBuilder.tsx src/components/plans/PlanBuilder.tsx
    ```
    (ExerciseList.tsx and ExerciseRow.tsx stay with same names, just moved into plans/ directory)

    **Step 2: Update internal references in renamed files**

    In `PlanList.tsx`:
    - Rename component `TemplateList` -> `PlanList`
    - Update imports: `useTemplates` -> `usePlans` from `'../../hooks/usePlans'`
    - Update imports: `Template` type from `'../../types/plan'`
    - Rename all internal variables: templates -> plans, template -> plan, templateId -> planId
    - Update UI text: "Templates" -> "Plans", "No templates" -> "No plans", "New Template" -> "New Plan", "Create Template" -> "Create Plan"
    - Update function names: createTemplate -> createPlan, deleteTemplate -> deletePlan, etc.
    - Update data-testid: `btn-create-template` -> `btn-create-plan`

    In `PlanCard.tsx`:
    - Rename component `TemplateCard` -> `PlanCard`
    - Update type imports from plan.ts
    - Rename props: template -> plan, onEditTemplate -> onEditPlan, onDeleteTemplate -> onDeletePlan
    - Update UI text: "Edit Template" -> "Edit Plan", "Delete Template" -> "Delete Plan"
    - Update data-testid: `btn-template-menu` -> `btn-plan-menu`, `btn-template-delete` -> `btn-plan-delete`

    In `PlanBuilder.tsx`:
    - Rename component `TemplateBuilder` -> `PlanBuilder`
    - Update type imports
    - Rename props/state: template -> plan, templateName -> planName, etc.
    - Update UI text: "Template Name" -> "Plan Name", "Create Template" -> "Create Plan", "Update Template" -> "Update Plan"
    - Update data-testid: `template-name-input` -> `plan-name-input`

    In `ExerciseList.tsx` and `ExerciseRow.tsx`:
    - Update type import paths from `'../../types/template'` to `'../../types/plan'`
    - Rename type references: TemplateExercise -> PlanExercise

    **Step 3: Verify file structure**
    - `ls src/components/plans/` should show PlanList.tsx, PlanCard.tsx, PlanBuilder.tsx, ExerciseList.tsx, ExerciseRow.tsx
    - `ls src/components/templates/` should not exist
  </action>
  <verify>
    `ls src/components/plans/PlanList.tsx src/components/plans/PlanCard.tsx src/components/plans/PlanBuilder.tsx` — all exist
    `test -d src/components/templates && echo "FAIL" || echo "OK"` — prints OK (old directory gone)
    `grep -c "PlanList" src/components/plans/PlanList.tsx` returns >= 1
  </verify>
  <done>
    Component directory is src/components/plans/. All three main component files renamed. Internal references updated with Plan naming and correct import paths.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update App, Navigation, and all consumer components</name>
  <files>
    src/App.tsx
    src/components/Navigation.tsx
    src/components/workout/StartWorkout.tsx
    src/components/workout/ActiveWorkout.tsx
    src/components/workout/WorkoutComplete.tsx
    src/components/workout/ExerciseView.tsx
    src/components/workout/SetGrid.tsx
    src/components/workout/RestTimer.tsx
    src/components/workout/ExerciseSubstitution.tsx
    src/components/workout/ProgressionAlert.tsx
    src/components/workout/RecentWorkoutCard.tsx
    src/components/rotation/RotationEditor.tsx
    src/components/rotation/QuickStartCard.tsx
    src/components/settings/RotationSection.tsx
    src/components/settings/ToonExportSection.tsx
    src/components/settings/DemoDataSection.tsx
  </files>
  <action>
    **Step 1: App.tsx**
    - Update Tab type: `'templates'` -> `'plans'`
    - Update imports: `TemplateList` -> `PlanList` from `'./components/plans/PlanList'`
    - Update JSX: `<TemplateList` -> `<PlanList`
    - Update conditional: `activeTab === 'templates'` -> `activeTab === 'plans'`
    - Rename any template-related variables/props

    **Step 2: Navigation.tsx**
    - Update Tab type: `'templates'` -> `'plans'`
    - Update tab label: `"Templates"` -> `"Plans"`
    - Update data-testid: `nav-templates` -> `nav-plans`
    - Update tab value in the tab definitions array

    **Step 3: Workout components**

    `StartWorkout.tsx`:
    - Update imports: Template type from plan.ts, usePlans hook
    - Rename variables: templates -> plans, selectedTemplate -> selectedPlan, templateId -> planId
    - Update UI text: "Select Template" -> "Select Plan", "template-select" -> "plan-select" data-testid
    - Rename function calls: from usePlans return values

    `ActiveWorkout.tsx`:
    - Update type imports from plan.ts
    - Rename props/variables referencing template -> plan

    `WorkoutComplete.tsx`:
    - Update type imports
    - Rename any template references in props

    `ExerciseView.tsx`:
    - Update type imports (PlanExercise from plan.ts)

    `SetGrid.tsx`:
    - Rename prop name if it references template (e.g., templateExercise -> planExercise)

    `RestTimer.tsx`, `ExerciseSubstitution.tsx`, `ProgressionAlert.tsx`:
    - Update any comment text referencing "template" -> "plan"

    `RecentWorkoutCard.tsx`:
    - Update field reference: templateName -> planName (matching useRecentWorkout's renamed field from Plan 01)

    **Step 4: Rotation components**

    `RotationEditor.tsx`:
    - Update imports: Template type, usePlans hook
    - Rename variables: templates -> plans, selectedTemplates -> selectedPlans
    - Update aria-labels and UI text referencing templates -> plans
    - Note: `template_ids` property on Rotation object STAYS (protected)

    `QuickStartCard.tsx`:
    - Update imports and variable names
    - Rename template references to plan

    **Step 5: Settings components**

    `RotationSection.tsx`:
    - Update imports, variable names
    - Update UI text: any "template" references -> "plan"

    `ToonExportSection.tsx`:
    - Update variable names referencing templates -> plans

    `DemoDataSection.tsx`:
    - Change text "Remove all workout logs, plans, and templates." -> "Remove all workout logs and plans."
    - Update any other template -> plan text references

    **Step 6: Compile check**
    - Run `npx tsc --noEmit 2>&1 | head -50` — remaining errors should only be in test files (fixed in Plan 03)
  </action>
  <verify>
    `npx tsc --noEmit 2>&1 | grep "error" | grep -v "test\|spec\|__fixtures__" | wc -l` returns 0 (no non-test errors)
    `grep -rn "Templates" src/components/ src/App.tsx | grep -v "test\|spec\|node_modules\|template_" | wc -l` returns 0 (no unprotected "Templates" text)
    `grep "nav-plans" src/components/Navigation.tsx` returns a match
    `grep "'plans'" src/App.tsx` returns a match (Tab type value)
  </verify>
  <done>
    All component files import from plan paths. All UI text says "Plans" instead of "Templates". Tab label, data-testid values, and all consumer components updated. TypeScript compiles clean for non-test files.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit 2>&1 | grep -c "error"` — errors only in test files
2. `grep -ri "template" src/components/ src/App.tsx | grep -v "template_\|template_id\|template_ids\|'template_created'\|'template_updated'\|'template_deleted'\|'template_archived'\|test\|spec"` — should return 0 hits
3. `grep "Plans" src/components/Navigation.tsx` — tab label present
4. `ls src/components/plans/` — shows PlanList.tsx, PlanCard.tsx, PlanBuilder.tsx, ExerciseList.tsx, ExerciseRow.tsx
</verification>

<success_criteria>
- src/components/plans/ directory exists with all renamed component files
- src/components/templates/ directory does not exist
- All UI text shows "Plans" instead of "Templates"
- All data-testid values updated (nav-plans, btn-create-plan, plan-name-input, etc.)
- Tab type uses 'plans' not 'templates'
- TypeScript compiles clean for all non-test files
</success_criteria>

<output>
After completion, create `.planning/phases/19-plans-rename/19-02-SUMMARY.md`
</output>
