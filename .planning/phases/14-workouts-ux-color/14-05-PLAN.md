---
phase: 14-workouts-ux-color
plan: 05
type: execute
wave: 4
depends_on: ["14-03", "14-04"]
files_modified:
  - src/index.css
autonomous: false

must_haves:
  truths:
    - "All text passes WCAG AA contrast ratio (4.5:1 normal, 3:1 large/UI)"
    - "Orange accent is retained as primary brand color"
    - "Color tokens are cohesive across all tabs and states"
    - "Disabled states render at reduced opacity"
  artifacts:
    - path: "src/index.css"
      provides: "WCAG-verified OKLCH color tokens"
  key_links:
    - from: "src/index.css"
      to: "all components"
      via: "@theme tokens"
      pattern: "--color-"
---

<objective>
Verify WCAG AA contrast compliance for all color token pairs and visually confirm cohesion across the entire app.

Purpose: Ensures accessibility compliance (CLR-02) and visual cohesion (CLR-01) after the full color migration. This is the final quality gate before the phase is complete.

Output: Verified WCAG AA compliance with any necessary token adjustments, plus user visual sign-off.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-workouts-ux-color/14-RESEARCH.md
@.planning/phases/14-workouts-ux-color/14-01-SUMMARY.md
@.planning/phases/14-workouts-ux-color/14-03-SUMMARY.md
@.planning/phases/14-workouts-ux-color/14-04-SUMMARY.md

@src/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: WCAG AA contrast verification and token adjustment</name>
  <files>src/index.css</files>
  <action>
Verify WCAG AA contrast ratios for all critical color token pairs. Use the OKLCH lightness values to compute approximate contrast ratios.

**Critical pairs to check (normal text = 4.5:1 minimum):**
1. text-primary (L=90%) on bg-primary (L=18%) — should be ~12:1+ (pass)
2. text-primary (L=90%) on bg-secondary (L=22%) — should be ~10:1+ (pass)
3. text-primary (L=90%) on bg-tertiary (L=27%) — should be ~8:1+ (pass)
4. text-secondary (L=72%) on bg-primary (L=18%) — need to verify ≥4.5:1
5. text-secondary (L=72%) on bg-secondary (L=22%) — need to verify ≥4.5:1
6. text-muted (L=55%) on bg-primary (L=18%) — need to verify ≥4.5:1
7. text-muted (L=55%) on bg-secondary (L=22%) — need to verify ≥3:1 (muted text is typically used for hints/labels = large text equivalent)

**UI component pairs (3:1 minimum):**
8. accent (L=72%) on bg-primary (L=18%) — should be high contrast (pass)
9. accent (L=72%) on bg-secondary (L=22%) — should pass 3:1
10. border-secondary (L=35%) on bg-secondary (L=22%) — should be visually distinct
11. success/error/warning text on bg-primary — should pass 4.5:1

**For each pair:**
- Calculate WCAG relative luminance from OKLCH lightness (approximate: L_oklch ≈ Y^(1/3), so Y ≈ L^3)
- Compute contrast ratio: (L1 + 0.05) / (L2 + 0.05)
- If ANY pair fails, adjust the token value:
  - For text on dark bg: increase lightness
  - For text on light bg: decrease lightness
  - Keep hue/chroma unchanged to preserve aesthetic

**If text-muted fails 4.5:1 on bg-primary:**
- Increase text-muted lightness from 55% to ~58-60% until 4.5:1 passes
- If text-muted is only used for placeholder/hint text (which is "large text" equivalent), 3:1 is sufficient

**If adjustments are needed:**
- Update the OKLCH values in @theme
- Document the change in the summary

**Also verify:**
- Disabled states: Button opacity-50 produces at least 3:1 contrast for the underlying text
- Error/success text: text-error and text-success on bg-primary pass 4.5:1
- accent-muted: bg-accent-muted/10 is visible but subtle on bg-primary

Run `npx vite build` after any adjustments to verify CSS compiles.
  </action>
  <verify>
All documented contrast pairs meet WCAG AA minimums.
`npx vite build` succeeds if tokens were adjusted.
`npx vitest run` — all tests pass.
  </verify>
  <done>All OKLCH token pairs verified for WCAG AA compliance. Any failing pairs adjusted. Contrast ratios documented.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete OKLCH color migration and Workouts tab UX redesign:
1. Soft dark gray backgrounds (Linear/Notion aesthetic) replacing near-black
2. Orange accent throughout as signature brand color
3. Quick Start hero card with one-tap start and edit mode
4. Recent workout summary card
5. Manual template selection collapsed behind "Browse all templates" accordion
6. Semantic tokens used consistently across ALL tabs
7. WCAG AA contrast verified for all text/background pairs
  </what-built>
  <how-to-verify>
1. Open the app at http://localhost:5173
2. **Workouts tab:**
   - Verify Quick Start card is prominent hero at top
   - Tap the Start button — it should immediately start the workout (cancel after)
   - Verify recent workout summary shows below Quick Start (if workouts exist)
   - Verify "Browse all templates" accordion is collapsed; expand it and check gym/template selectors work
   - Overall: feels compact, more content visible above the fold
3. **Color system across tabs:**
   - Check Workouts tab: soft dark gray backgrounds, orange accent pops
   - Check Templates tab: consistent card styling, readable text
   - Check Analytics tab: charts render, labels readable, progression colors correct
   - Check Settings tab: consistent styling
4. **Specific checks:**
   - Text is readable everywhere (no light-on-light or dark-on-dark)
   - Orange accent appears on active nav tab, buttons, Quick Start border
   - Success (green) for PRs, Error (red) for issues, Warning (amber) for alerts
   - Disabled buttons are visibly dimmed but still readable
5. **Overall feel:** Modern, clean, intentional — not the default Tailwind dark zinc look
  </how-to-verify>
  <resume-signal>Type "approved" or describe specific issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. WCAG AA contrast ratios verified for all critical pairs
2. User approves visual cohesion across all tabs
3. Quick Start is prominent hero CTA
4. Orange accent retained as signature color
5. All tabs render consistently with new color system
</verification>

<success_criteria>
- All text passes WCAG AA (4.5:1 normal, 3:1 large/UI) — CLR-02
- OKLCH tokens cohesive across all tabs — CLR-01
- Orange retained as primary brand accent — CLR-03
- User visual approval of complete redesign
</success_criteria>

<output>
After completion, create `.planning/phases/14-workouts-ux-color/14-05-SUMMARY.md`
</output>
